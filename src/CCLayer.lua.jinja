
{% if data.customClass != "" %}
local {{ classname }} = class("{{ classname }}",require("app.views.{{ data.customClass }}"))
{% else %}
local {{ classname }} = class("{{ classname }}",function()
    return display.new{{ super }}()
end)
{% endif %}

{% import 'CCNode.lua.jinja' as CCNode %}
{% import 'CCSprite.lua.jinja' as CCSprite %}


{% macro rennder_tree(data,parent) -%}
    {% for item in data.children -%}
        {% set testing = parent %}
        {% if item.baseClass == "CCNode" -%}
            {{ CCNode.rennder(item,parent) -}}
            {% set testing = "node" %}
        {% elif item.baseClass == "CCSprite" -%}
            {{ CCSprite.rennder(item,parent) -}}
            {% set testing = "sprite" %}
        {% endif %}
        {% if item.children -%}
            {{ rennder_tree(item,testing) -}}
        {% endif %}
    {%- endfor %}
{%- endmacro %}


function {{ classname }}:ctor()
    {{ rennder_tree(data,"self") }}
end

return {{ classname }}